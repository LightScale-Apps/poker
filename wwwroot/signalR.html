<!DOCTYPE html>
<html lang="en">
  <head>
  
  </head>

  <body>

    <br><h1>message input</h1>
    <input type="text" id="messageInput" />
    <button onclick="send()">Send Message</button>
    <br><br>

    <h1>MESSAGES BELOW</h1>
    <button onclick="sr()">configure</button>
    <ul id="messagesList"></ul>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.0/signalr.min.js"></script>
    <script type="text/javascript">

function sr() {
  user.chatConnection.start();

  user.chatConnection.on("ReceiveMessage", (modelResponse) => {
    let li = document.createElement("li");
    li.textContent = `${modelResponse}`;
    document.getElementById("messagesList").appendChild(li);
  });

  function send() {
    const str = document.getElementById("messageInput").value;
    user.chatConnection.invoke("SendMessage", str)
  }
}

class APIConnection {
  constructor() {
    this.URL = "http://192.168.68.116:3141/";
    this.authorized = false;
    this.data = {};
    this.chatConnection = new signalR.HubConnectionBuilder().withUrl("/game").build();
  }

  async game(input) {

    if (this.chatConnection.state !== "Connected") {
      await this.chatConnection.start();
    }
    return this.chatConnection.invoke("SendMessage", input);

  }
}

user = new APIConnection();

  </script>
  </body>
</html>
